<!DOCTYPE html><html><head><title>Developing template engines for Express</title><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/dropit.css"><link rel="stylesheet" href="/css/prism.css"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:300,400,600,700&amp;amp;subset=latin,latin-ext"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script><script src="/js/app.js"></script><script src="/js/retina.js"></script><script src="/js/dropit.js"></script><script src="/js/prism.js"></script></head><body class="inner"><section class="content"><header><section id="logo"><a href="/" class="express">Express</a></section><div id="navbar"><ul id="navmenu"><li><a href="/">Home</a></li><li><ul id="application-menu" class="menu"><li><a href="/4x/api.html">API reference</a><ul><li><a href="/4x/api.html">4.x</a></li><li><a href="/3x/api.html">3.x</a></li><li><a href="/2x/">2.x (deprecated)</a></li></ul></li></ul></li><li><ul id="getting-started-menu" class="menu"><li><a href="/en/starter/installing.html">Getting started</a><ul><li><a href="/en/starter/installing.html">Installing</a></li><li><a href="/en/starter/generator.html">Express generator</a></li><li><a href="/en/starter/hello-world.html">Hello World!</a></li><li><a href="/en/starter/basic-routing.html">Basic routing tutorial</a></li><li><a href="/en/starter/faq.html">FAQ</a></li></ul></li></ul></li><li><ul id="guide-menu" class="menu"><li><a href="/en/guide/routing.html">Guide</a><ul><li><a href="/en/guide/routing.html">Routing</a></li><li><a href="/en/guide/error-handling.html">Error handling</a></li><li><a href="/en/guide/debugging.html">Debugging Express</a></li><li><a href="/en/guide/behind-proxies.html">Express behind proxies</a></li><li><a href="/en/guide/migrating-4.html">Moving to Express 4</a></li><li><a href="/en/guide/using-components.html">Using components</a></li><li><a href="/en/guide/using-template-engines.html">Using template engines</a></li><li><a href="/en/guide/database-integration.html">Database integration</a></li></ul></li></ul></li><li><ul id="advanced-topics-menu" class="menu"><li><a href="/en/advanced/express-components.html" class="active">Advanced topics</a><ul><li><a href="/en/advanced/express-components.html">Express components</a></li><li><a href="/en/advanced/developing-template-engines.html">Template engines</a></li><li><a href="/en/advanced/security.html">Security</a></li><li><a href="/en/advanced/performance.html">Performance</a></li></ul></li></ul></li><li><ul id="resources-menu" class="menu"><li><a href="/en/resources/glossary.html">Resources</a><ul><li><a href="/en/resources/glossary.html">Glossary</a></li><li><a href="/en/resources/applications.html">Applications</a></li><li><a href="/en/resources/community.html">Community</a></li><li><a href="/en/resources/books.html">Books</a></li></ul></li></ul></li></ul></div></header><h1 id="developing-template-engines-for-express">Developing template engines for Express</h1>
<p>Use the <code>app.engine(ext, callback)</code> method to create your own template engine. <code>ext</code> refers to the file extension, <code>callback</code> is the template engine function which accepts the location of the file, the options object, and the callback function, as its parameters.</p>
<p>The following is an example of implementing a very simple template engine for rendering &quot;.ntl&quot; files.</p>
<pre><code class="lang-js">var fs = require(&#39;fs&#39;); // this engine requires the fs module
app.engine(&#39;ntl&#39;, function (filePath, options, callback) { // define the template engine
  fs.readFile(filePath, function (err, content) {
    if (err) throw new Error(err);
    // this is an exteremly simple template engine
    var rendered = content.toString().replace(&#39;#title#&#39;, &#39;&lt;title&gt;&#39;+ options.title +&#39;&lt;/title&gt;&#39;)
    .replace(&#39;#message#&#39;, &#39;&lt;h1&gt;&#39;+ options.message +&#39;&lt;/h1&gt;&#39;);
    return callback(null, rendered);
  })
});
app.set(&#39;views&#39;, &#39;./views&#39;); // specify the views directory
app.set(&#39;view engine&#39;, &#39;ntl&#39;); // register the template engine
</code></pre>
<p>Your app will now be able to render &quot;.ntl&quot; files. Create a file named &quot;index.ntl&quot; in the views directory with the following content.</p>
<pre><code>#title#
#message#
</code></pre><p>Then, create the following route in your app.</p>
<pre><code class="lang-js">app.get(&#39;/&#39;, function (req, res) {
  res.render(&#39;index&#39;, { title: &#39;Hey&#39;, message: &#39;Hello there!&#39;});
})
</code></pre>
<p>On making a request to the home page, &quot;index.ntl&quot; will be rendered as HTML.</p>
<h2 id="how-should-i-structure-my-application-">How should I structure my application?</h2>
<p>There is no true answer to this question. It is highly dependant
on the scale of your application and the team involved. To be as
flexible as possible, Express makes no assumptions in terms of structure.</p>
<p>Routes and other application-specific logic may live in as many files
as you wish, in any directory structure you prefer. View the following
examples for inspiration:</p>
<ul>
<li><a href="https://github.com/strongloop/express/blob/master/examples/route-separation/index.js#L19">Route listings</a></li>
<li><a href="https://github.com/strongloop/express/blob/master/examples/route-map/index.js#L47">Route map</a></li>
<li><a href="https://github.com/strongloop/express/tree/master/examples/mvc">MVC style controllers</a></li>
</ul>
<p>Also, there are third-party extensions for Express, which simplify some of these patterns:</p>
<ul>
<li><a href="https://github.com/expressjs/express-resource">Resourceful routing</a></li>
<li><a href="https://github.com/expressjs/express-namespace">Namespaced routing</a></li>
</ul>
</section><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5XL76H" height="0" width="0" style="display: none; visibility: hidden;"></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5XL76H');
</script><a id="top" href="#"><img src="/images/arrow.png"></a><footer><div id="footer-content">&copy; 2012 TJ Holowaychuk. All rights reserved.</div></footer></body></html>